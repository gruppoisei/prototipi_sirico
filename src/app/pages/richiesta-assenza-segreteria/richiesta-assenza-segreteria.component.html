<div class="container">
    <button (click)="expandSection('byidrichiesta')" class="search-button">Ricerca per ID Richiesta</button>
    <button (click)="expandSection('byidpersona')" class="search-button">Ricerca per ID Persona</button>
    <button (click)="expandSection('all')" class="search-button">Prendi tutti i dati</button>
    <!--Approva richiesta dopo averle stampate tutte-->
    <div>
        <div class="expanded-section" *ngIf="expandedSection === 'byidrichiesta'">
            <h1>Ricerca per ID Richiesta</h1>
            <input [(ngModel)]="idRichiesta" type="number" placeholder="Inserisci l'ID richiesta">
            <button (click)="getByRichiestaId(idRichiesta)">Cerca</button>
        </div>

        <div class="expanded-section" *ngIf="expandedSection === 'byidpersona'">
            <h1>Ricerca per ID Persona</h1>
            <input [(ngModel)]="idPersona" type="number" placeholder="Inserisci l'ID persona">
            <button (click)="getByResponsabileId(idPersona)">Cerca</button>
        </div>

        <div class="expanded-section" *ngIf="expandedSection === 'all'">
            <h1>Stampa tutte le richieste approvabili</h1>
            <input [(ngModel)]="userName" type="text" placeholder="Inserisci il tuo Nome Utente">
            <button (click)="getAllStessoResponsabile(userName)">Cerca</button>
        </div>

        <br>
        
        <div *ngIf="output_getall && output_getall.length > 0">
            <table>
              <thead>
                <tr>
                  <th>Data e ora inizio: </th>
                  <th>Data e ora fine: </th>
                  <th>Richiedente</th>
                  <!-- <th>RichiedenteID</th> -->
                  <th>Responsabile associato</th>
                  <th>Note</th>
                  <th>RichiestaID</th>
                  <th>Approvazione</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let id of output_getall">
                  <td>{{ id.riasDataorainizioassenza }}</td>
                  <td>{{ id.riasDataorafineassenza }}</td>
                  <!-- <td>{{ id.riasFkPersona }}</td> -->
                  <td>{{ id.riasFkPersonaid }}</td>
                  <td>{{ id.riasFkResponsabileidApprovazione }}</td>
                  <td>{{ id.riasNote }}</td>
                  <td>{{ id.riasRichiestaassenzaid }}</td>              
                  <div>
                    <button *ngIf="!id.riasApprovato" (click)="approvaRichiesta(id.riasRichiestaassenzaid, motivazione)">Modifica</button>
                    <span *ngIf="id.riasApprovato">Approvato!</span>
                  </div>
                </tr>
              </tbody>
            </table>
          </div>
          <div *ngIf="!(output_getall && output_getall.length > 0)">
            Nessun dato disponibile
          </div>
          
    </div>
</div>